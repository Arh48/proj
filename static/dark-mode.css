/* Dark Mode Theme */
body[data-theme='dark'] {
    background-color: #181818; /* Slightly softer black */
    color: #E0E0E0; /* Softer white for reduced strain */
}

/* Logo Swap */
body[data-theme='dark'] #navbarBrand img {
    content: url('/static/logo-dark.png');
}

/* Message Box */
body[data-theme='dark'] .message-box {
    background-color: #292929; /* Sleeker dark gray */
    color: #CFCFCF; /* Softer contrast */
    border: 1px solid #3C3C3C; /* Dark but refined */
}

/* All messages: received default */
body[data-theme='dark'] .discord-message {
    background-color: #232323; /* Deep gray for received */
    color: #D1D1D1; /* Light gray for readability */
    border-radius: 10px;
    padding: 8px 12px;
    margin-bottom: 6px;
    box-shadow: 0 1px 2px #0004;
}

/* Sent Messages: just a touch lighter than the message box */
body[data-theme='dark'] .discord-message.sent {
    background-color: #353840; /* Slightly lighter than .message-box */
    color: #FAFAFA; /* Very light for strong contrast */
    border-radius: 10px;
    outline: none !important;
    box-shadow: 0 1px 2px #0004;
}

/* Username coloring */
body[data-theme='dark'] .discord-username {
    color: #4EF2F7;
}
body[data-theme='dark'] .discord-message.sent .discord-username {
    color: #f7b24e;
}

/* Timestamp coloring */
body[data-theme='dark'] .discord-timestamp {
    color: #b9bbbe;
}

/* Message content */
body[data-theme='dark'] .discord-content {
    color: #E0E0E0;
}

/* Chat images */
body[data-theme='dark'] .chat-image {
    border: 1px solid #484848;
    background: #232323;
}

/* Navbar */
body[data-theme='dark'] .navbar-color {
    background-color: #222222; /* Solid dark for clarity */
    color: #EAEAEA; /* Balanced white */
    border-bottom: 1px solid #444444; /* Subtle definition */
}

/* Navigation Links */
body[data-theme='dark'] .nav-link {
    color: #DDDDDD; /* Slightly off-white */
}

body[data-theme='dark'] .nav-link:hover {
    color: #AFAFAF; /* Gentle contrast */
}

/* Buttons */
body[data-theme='dark'] .btn-primary {
    background-color: #1259B4; /* Deep and polished blue */
    color: #EAEAEA;
    border: 1px solid #209CEE;
}
body[data-theme='dark'] .btn-primary:focus {
    outline: 2px solid #209CEE; /* More refined focus effect */
}

/* Plus Button */
body[data-theme='dark'] .plus-btn {
    background-color: #353840;
    color: #EAEAEA;
    border: 1px solid #444;
}
body[data-theme='dark'] .plus-btn:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* Inputs */
body[data-theme='dark'] #messageInput {
    background-color: #424141ad; /* Balanced darkness */
    color: #EAEAEA; /* Softer text color */
    border: 1px solid #444444;
}
body[data-theme='dark'] #messageInput:focus {
    outline: 2px solid #209CEE;
}

/* Messages container */
body[data-theme='dark'] #messages {
    background-color: #424242ba; /* Balanced darkness */
    color: #EAEAEA; /* Softer text color */
}

/* Mention highlight bubble for dark mode */
body[data-theme='dark'] .mention-highlight-bubble {
    background: #121a28 !important;                  /* Even deeper blue, easy on dark backgrounds */
    border-left: 4px solid #284080 !important;       /* Muted blue border for accent */
    box-shadow: 0 1px 8px #0039b466 !important;
    border-radius: 8px !important;
    color: #eaf1fb !important;                       /* Soft, light text for dark mode */
    transition: background 0.18s, box-shadow 0.18s !important;
    position: relative !important;
    font-weight: 500 !important;
}
body[data-theme='dark'] .mention-highlight-bubble .discord-content,
body[data-theme='dark'] .mention-highlight-bubble .reply-context,
body[data-theme='dark'] .mention-highlight-bubble .discord-timestamp,
body[data-theme='dark'] .mention-highlight-bubble .discord-username,
body[data-theme='dark'] .mention-highlight-bubble .discord-you {
    color: #eaf1fb !important; /* Ensure all text is readable on dark backgrounds */
}
body[data-theme='dark'] .mention-highlight-bubble:hover {
    background: #00217d !important;                  /* Subtle highlight for hover on dark mode */
    box-shadow: 0 2px 16px 2px #0041f677 !important;
}

/* Mention highlight bubble for light mode (when dark mode is not active) */
body:not([data-theme='dark']) .mention-highlight-bubble,
.mention-highlight-bubble:not(body[data-theme='dark'] .mention-highlight-bubble) {
    background: #f9e69b !important;                   /* Discord yellow highlight */
    border-left: 4px solid #f8d363 !important;        /* Discord-style border */
    box-shadow: 0 0 8px #f8d36333;
    border-radius: 8px;
    color: #004172 !important;                        /* Discord's readable dark text */
    transition: background 0.18s, box-shadow 0.18s;
    position: relative;
    font-weight: 500;
}
body:not([data-theme='dark']) .mention-highlight-bubble .discord-content,
body:not([data-theme='dark']) .mention-highlight-bubble .reply-context,
body:not([data-theme='dark']) .mention-highlight-bubble .discord-timestamp,
body:not([data-theme='dark']) .mention-highlight-bubble .discord-username,
body:not([data-theme='dark']) .mention-highlight-bubble .discord-you,
.mention-highlight-bubble:not(body[data-theme='dark'] .mention-highlight-bubble) .discord-content,
.mention-highlight-bubble:not(body[data-theme='dark'] .mention-highlight-bubble) .reply-context,
.mention-highlight-bubble:not(body[data-theme='dark'] .mention-highlight-bubble) .discord-timestamp,
.mention-highlight-bubble:not(body[data-theme='dark'] .mention-highlight-bubble) .discord-username,
.mention-highlight-bubble:not(body[data-theme='dark'] .mention-highlight-bubble) .discord-you {
    color: #23272a !important; /* Ensure all text is readable! */
}
body:not([data-theme='dark']) .mention-highlight-bubble:hover,
.mention-highlight-bubble:not(body[data-theme='dark'] .mention-highlight-bubble):hover {
    background: #fae27a !important;
    box-shadow: 0 0 16px 2px #f8d36377;
}

/* Remove blue outline from all chat elements in dark mode */
body[data-theme='dark'] .discord-message:focus,
body[data-theme='dark'] .discord-message.sent:focus,
body[data-theme='dark'] .discord-message.sent:active,
body[data-theme='dark'] .discord-message.sent:visited,
body[data-theme='dark'] .btn:focus,
body[data-theme='dark'] input:focus,
body[data-theme='dark'] textarea:focus,
body[data-theme='dark'] select:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* Modal overlay */
body[data-theme='dark'] #fullscreenImageModal {
    background: rgba(0,0,0,0.92);
}